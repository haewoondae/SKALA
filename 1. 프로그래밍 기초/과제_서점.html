<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¨ë¼ì¸ ì„œì </title>
    <link rel="stylesheet" href="ì„œì .css">
</head>

<body>
    <div class="container">
        <h1>ğŸ“š ì˜¨ë¼ì¸ ì„œì </h1>
        
        <div class="search-section">
            <h2>ì±… ê²€ìƒ‰</h2>
            <div class="search-container">
                <select id="searchType" class="search-select">
                    <option value="title">ì œëª©</option>
                    <option value="author">ì €ì</option>
                </select>
                <div id="searchInput" contenteditable="true" class="search-input" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">
                </div>
            </div>
        </div>

        <div class="add-book-section">
            <h2>ìƒˆ ì±… ì¶”ê°€</h2>
            <div class="add-book-form">
                <div class="input-group">
                    <label>ì œëª©:</label>
                    <div id="newBookTitle" contenteditable="true" class="book-input" placeholder="ì±… ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”"></div>
                </div>
                
                <div class="input-group">
                    <label>ì €ì:</label>
                    <div id="newBookAuthor" contenteditable="true" class="book-input" placeholder="ì €ìëª…ì„ ì…ë ¥í•˜ì„¸ìš”"></div>
                </div>
                
                <div class="input-group">
                    <label>ê°€ê²©:</label>
                    <div id="newBookPrice" contenteditable="true" class="book-input" placeholder="ê°€ê²©ì„ ì…ë ¥í•˜ì„¸ìš”"></div>
                </div>
                
                <div class="input-group">
                    <label>ì¬ê³ :</label>
                    <div id="newBookStock" contenteditable="true" class="book-input" placeholder="ì¬ê³  ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”"></div>
                </div>
                
                <div class="input-group">
                    <label>ì¹´í…Œê³ ë¦¬:</label>
                    <select id="newBookCategory" class="search-select">
                        <option value="">ì¹´í…Œê³ ë¦¬ ì„ íƒ</option>
                        <option value="í”„ë¡œê·¸ë˜ë°">í”„ë¡œê·¸ë˜ë°</option>
                        <option value="ê²½ì œ">ê²½ì œ</option>
                        <option value="ì†Œì„¤">ì†Œì„¤</option>
                        <option value="ì—­ì‚¬">ì—­ì‚¬</option>
                        <option value="ê³¼í•™">ê³¼í•™</option>
                        <option value="ì² í•™">ì² í•™</option>
                    </select>
                </div>
                
                <button id="addBookBtn" class="add-book-button">ì±… ì¶”ê°€í•˜ê¸°</button>
            </div>
        </div>

        <div class="books-section">
            <h2>ì±… ëª©ë¡</h2>
            <div class="category-filter">
                <label>ì¹´í…Œê³ ë¦¬: </label>
                <select id="categoryFilter" class="search-select">
                    <option value="">ì „ì²´</option>
                    <option value="í”„ë¡œê·¸ë˜ë°">í”„ë¡œê·¸ë˜ë°</option>
                    <option value="ê²½ì œ">ê²½ì œ</option>
                    <option value="ì†Œì„¤">ì†Œì„¤</option>
                    <option value="ì—­ì‚¬">ì—­ì‚¬</option>
                    <option value="ê³¼í•™">ê³¼í•™</option>
                    <option value="ì² í•™">ì² í•™</option>
                </select>
            </div>
            <div id="booksContainer" class="books-grid">
                <!-- ì±… ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <script> 
        const books = [
            {
                title: "ìë°”ìŠ¤í¬ë¦½íŠ¸ ì™„ë²½ ê°€ì´ë“œ",
                author: "David Flanagan",
                price: 35000,
                stock: 5,
                category: "í”„ë¡œê·¸ë˜ë°"
            },
            {
                title: "ëª¨ë˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ Deep Dive",
                author: "ì´ì›…ëª¨",
                price: 40000,
                stock: 0,
                category: "í”„ë¡œê·¸ë˜ë°"
            },
            {
                title: "ëˆì˜ ì‹¬ë¦¬í•™",
                author: "ëª¨ê±´ í•˜ìš°ì ˆ",
                price: 18000,
                stock: 3,
                category: "ê²½ì œ"
            },
            {
                title: "ë¶ˆí¸í•œ í¸ì˜ì ",
                author: "ê¹€í˜¸ì—°",
                price: 14500,
                stock: 2,
                category: "ì†Œì„¤"
            },
            {
                title: "Clean Code",
                author: "Robert C. Martin",
                price: 32000,
                stock: 7,
                category: "í”„ë¡œê·¸ë˜ë°"
            },
            {
                title: "ë¦¬ì•¡íŠ¸ë¥¼ ë‹¤ë£¨ëŠ” ê¸°ìˆ ",
                author: "ê¹€ë¯¼ì¤€",
                price: 36000,
                stock: 4,
                category: "í”„ë¡œê·¸ë˜ë°"
            },
            {
                title: "íŒŒì´ì¬ ì•Œê³ ë¦¬ì¦˜ ì¸í„°ë·°",
                author: "ë°•ìƒê¸¸",
                price: 42000,
                stock: 6,
                category: "í”„ë¡œê·¸ë˜ë°"
            },
            {
                title: "ë°ì´í„°ë² ì´ìŠ¤ ê°œë¡ ",
                author: "ê¹€ì—°í¬",
                price: 28000,
                stock: 0,
                category: "í”„ë¡œê·¸ë˜ë°"
            },
            {
                title: "ë¶€ì˜ ì¶”ì›”ì°¨ì„ ",
                author: "ì— ì œì´ ë“œë§ˆì½”",
                price: 16000,
                stock: 8,
                category: "ê²½ì œ"
            },
            {
                title: "íˆ¬ìì˜ ì •ì„",
                author: "ë²¤ìë¯¼ ê·¸ë ˆì´ì—„",
                price: 22000,
                stock: 5,
                category: "ê²½ì œ"
            },
            {
                title: "ê²½ì œí•™ ì½˜ì„œíŠ¸",
                author: "íŒ€ í•˜í¬ë“œ",
                price: 15000,
                stock: 3,
                category: "ê²½ì œ"
            },
            {
                title: "ì‹œì¥ê²½ì œì˜ ì›ë¦¬",
                author: "ë°•ì¤€ì‹",
                price: 25000,
                stock: 0,
                category: "ê²½ì œ"
            },
            {
                title: "ë¯¸ë“œë‚˜ì‡ ë¼ì´ë¸ŒëŸ¬ë¦¬",
                author: "ë§¤íŠ¸ í—¤ì´ê·¸",
                price: 13500,
                stock: 9,
                category: "ì†Œì„¤"
            },
            {
                title: "82ë…„ìƒ ê¹€ì§€ì˜",
                author: "ì¡°ë‚¨ì£¼",
                price: 12000,
                stock: 7,
                category: "ì†Œì„¤"
            },
            {
                title: "ì™„ë“ì´",
                author: "ê¹€ë ¤ë ¹",
                price: 11000,
                stock: 4,
                category: "ì†Œì„¤"
            },
            {
                title: "1984",
                author: "ì¡°ì§€ ì˜¤ì›°",
                price: 13000,
                stock: 6,
                category: "ì†Œì„¤"
            },
            {
                title: "í•´ë¦¬í¬í„°ì™€ ë§ˆë²•ì‚¬ì˜ ëŒ",
                author: "J.K. ë¡¤ë§",
                price: 14000,
                stock: 12,
                category: "ì†Œì„¤"
            },
            {
                title: "ìš°ë¦¬ëŠ” ëª¨ë‘ ì¡°ê¸ˆ ì´ìƒí•˜ë‹¤",
                author: "ë°•ì§€í˜„",
                price: 12500,
                stock: 0,
                category: "ì†Œì„¤"
            },
            {
                title: "ì‚¬í”¼ì—”ìŠ¤",
                author: "ìœ ë°œ í•˜ë¼ë¦¬",
                price: 19000,
                stock: 8,
                category: "ì—­ì‚¬"
            },
            {
                title: "í•œêµ­ì‚¬ í¸ì§€",
                author: "ë°•ì€ë´‰",
                price: 16500,
                stock: 5,
                category: "ì—­ì‚¬"
            },
            {
                title: "ì„¸ê³„ì‚¬ ì†ì˜ í•œêµ­",
                author: "ê¹€íƒœì‹",
                price: 18000,
                stock: 3,
                category: "ì—­ì‚¬"
            },
            {
                title: "ì´, ê· , ì‡ ",
                author: "ì¬ë ˆë“œ ë‹¤ì´ì•„ëª¬ë“œ",
                price: 24000,
                stock: 6,
                category: "ì—­ì‚¬"
            },
            {
                title: "ì½”ìŠ¤ëª¨ìŠ¤",
                author: "ì¹¼ ì„¸ì´ê±´",
                price: 20000,
                stock: 4,
                category: "ê³¼í•™"
            },
            {
                title: "ì´ê¸°ì  ìœ ì „ì",
                author: "ë¦¬ì²˜ë“œ ë„í‚¨ìŠ¤",
                price: 22000,
                stock: 0,
                category: "ê³¼í•™"
            },
            {
                title: "ë¬¼ë¦¬í•™ ê°•ì˜",
                author: "ë¦¬ì²˜ë“œ íŒŒì¸ë§Œ",
                price: 35000,
                stock: 2,
                category: "ê³¼í•™"
            },
            {
                title: "ìƒëª…ì´ë€ ë¬´ì—‡ì¸ê°€",
                author: "ì—ë¥´ë¹ˆ ìŠˆë¢°ë”©ê±°",
                price: 17000,
                stock: 5,
                category: "ê³¼í•™"
            },
            {
                title: "ìˆ˜í•™ì˜ ì•„ë¦„ë‹¤ì›€",
                author: "ë°•í˜•ì£¼",
                price: 19500,
                stock: 7,
                category: "ê³¼í•™"
            },
            {
                title: "ì•„íŠ¸ ì˜¤ë¸Œ ì¼ë ‰íŠ¸ë¡œë‹‰ìŠ¤",
                author: "í´ í˜¸ë¡œìœ„ì¸ ",
                price: 55000,
                stock: 1,
                category: "ê³¼í•™"
            },
            {
                title: "ì¸ê°„ì˜ ì¡°ê±´",
                author: "í•œë‚˜ ì•„ë ŒíŠ¸",
                price: 21000,
                stock: 3,
                category: "ì² í•™"
            },
            {
                title: "ë‹ˆì²´ì˜ ì¸ê°„í•™",
                author: "ë°±ìŠ¹ì˜",
                price: 18500,
                stock: 4,
                category: "ì² í•™"
            }
        ];

            // ì—¬ëŸ¬ ê°œì˜ keyë¥¼ ë°›ì•„, key: ê°’ ìŒì„ í•œ ì¤„ë¡œ ì´ì–´ ì¶œë ¥í•˜ëŠ” í•¨ìˆ˜
            function printBookInfo(book, keys) {
                const parts = keys.map(function(key) {   // ê° í‚¤ì— ëŒ€í•´ "key: ê°’" ë¬¸ìì—´ì„ ë§Œë“¤ì–´ì¤Œ
                    return key + ": " + book[key];           // ê° ì†ì„±ëª…ì— ë§ëŠ” ê°’ì„ ë™ì ìœ¼ë¡œ ê°€ì ¸ì˜´

            });

                // ë°°ì—´ë¡œ ë§Œë“¤ì–´ì§„ "key: ê°’" ìŒë“¤ì„ ê³µë°±(ë˜ëŠ” ì‰¼í‘œ ë“±)ìœ¼ë¡œ ì´ì–´ë¶™ì„
                const line = parts.join(" / ");     // êµ¬ë¶„ì ì›í•˜ëŠ” ëŒ€ë¡œ(" ", ", ", "/" ë“±) ë³€ê²½ ê°€ëŠ¥
                // í•œ ì¤„ë¡œ ì¶œë ¥
                console.log(line);
            }

            function printAllbooks(books) {
                for (let i = 0; i < books.length; i++) {
                    printBookInfo(books[i], ["title"]);
                }
            }

            function printAvailableBooks(books) {
                for (book of books) {
                    if (book.stock >0) {
                        printBookInfo(book, ["title", "stock"]);
                    } else {
                    }
                }
            }

            function printSelectedCategoryBooks(books, category) {
                books.forEach(book => {
                    if (book.category === category) {
                        printBookInfo(book, ["title"]);
                    }
                });
            }

            function calculateAvgPrice(books) {
                var totalPrice = 0;                         // varì€ í•¨ìˆ˜ ì „ì²´ì—ì„œ ìœ íš¨
                for (let book of books) {                   // letì€ forë¬¸ ì•ˆì—ì„œë§Œ ìœ íš¨
                    totalPrice += book.price;
                }
                var avgPrice = totalPrice / books.length;
                return avgPrice;
            }

            function addBookStock(books, amount = 10) {
                books.forEach(book => {
                    if (book.stock === 0) {
                        book.stock += amount; // stockì´ ì—†ìœ¼ë©´ amountë§Œí¼ ì¶”ê°€
                    }
                });
            }
            

            // printAllbooks(books);
            // printAvailableBooks(books);
            // printSelectedCategoryBooks(books, "í”„ë¡œê·¸ë˜ë°");
            // console.log("í”„ë¡œê·¸ë˜ë° ì±…ì˜ í‰ê·  ê°€ê²©: " + calculateAvgPrice(books));
            // addBookStock(books, 10);
            // for (let book of books) {
            //     printBookInfo(book, ["title", "stock"]);
            // }

            // í™ˆí˜ì´ì§€ ê¸°ëŠ¥ ì¶”ê°€
            
            // ì±… ì¹´ë“œ HTML ìƒì„± í•¨ìˆ˜
            function createBookCard(book) {
                const stockText = book.stock > 0 ? `ì¬ê³ : ${book.stock}ê¶Œ` : 'í’ˆì ˆ';
                const stockClass = book.stock > 0 ? 'book-stock' : 'book-stock out-of-stock';
                
                return `
                    <div class="book-card">
                        <div class="book-title">${book.title}</div>
                        <div class="book-author">ì €ì: ${book.author}</div>
                        <div class="book-price">ê°€ê²©: ${book.price.toLocaleString()}ì›</div>
                        <div class="${stockClass}">${stockText}</div>
                        <div class="book-category">${book.category}</div>
                    </div>
                `;
            }

            // ì±… ëª©ë¡ í‘œì‹œ í•¨ìˆ˜
            function displayBooks(booksToShow) {
                const container = document.getElementById('booksContainer');
                
                if (booksToShow.length === 0) {
                    container.innerHTML = '<div class="no-results">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                    return;
                }
                
                container.innerHTML = booksToShow.map(book => createBookCard(book)).join('');
            }

            // ê²€ìƒ‰ í•¨ìˆ˜
            function searchBooks() {
                const searchType = document.getElementById('searchType').value;
                const searchTerm = document.getElementById('searchInput').textContent.toLowerCase().trim();
                const categoryFilter = document.getElementById('categoryFilter').value;
                
                let filteredBooks = books;
                
                // ì¹´í…Œê³ ë¦¬ í•„í„° ì ìš©
                if (categoryFilter !== '') {
                    filteredBooks = filteredBooks.filter(book => book.category === categoryFilter);
                }
                
                // ê²€ìƒ‰ì–´ í•„í„° ì ìš©
                if (searchTerm !== '') {
                    filteredBooks = filteredBooks.filter(book => {
                        if (searchType === 'title') {
                            return book.title.toLowerCase().includes(searchTerm);
                        } else if (searchType === 'author') {
                            return book.author.toLowerCase().includes(searchTerm);
                        }
                        return false;
                    });
                }
                
                displayBooks(filteredBooks);
            }

            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
            document.getElementById('searchInput').addEventListener('input', searchBooks);
            document.getElementById('searchType').addEventListener('change', searchBooks);
            document.getElementById('categoryFilter').addEventListener('change', searchBooks);

            // ì±… ì¶”ê°€ ê¸°ëŠ¥ - ìƒˆë¡œìš´ ì±…ì„ ì…ë ¥ë°›ì•„ ë°°ì—´ì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜
            function addNewBook() {
                // 1ë‹¨ê³„: ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê°’ë“¤ì„ HTML ìš”ì†Œì—ì„œ ê°€ì ¸ì˜¤ê¸°
                const title = document.getElementById('newBookTitle').textContent.trim();    // ì œëª© ì…ë ¥ í•„ë“œì—ì„œ í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê³  ì•ë’¤ ê³µë°± ì œê±°
                const author = document.getElementById('newBookAuthor').textContent.trim();  // ì €ì ì…ë ¥ í•„ë“œì—ì„œ í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê³  ì•ë’¤ ê³µë°± ì œê±°
                const price = document.getElementById('newBookPrice').textContent.trim();    // ê°€ê²© ì…ë ¥ í•„ë“œì—ì„œ í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê³  ì•ë’¤ ê³µë°± ì œê±°
                const stock = document.getElementById('newBookStock').textContent.trim();    // ì¬ê³  ì…ë ¥ í•„ë“œì—ì„œ í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê³  ì•ë’¤ ê³µë°± ì œê±°
                const category = document.getElementById('newBookCategory').value;           // ì¹´í…Œê³ ë¦¬ select ìš”ì†Œì—ì„œ ì„ íƒëœ ê°’ ê°€ì ¸ì˜¤ê¸°

                // ê°œë°œì ë„êµ¬ ì½˜ì†”ì— ì…ë ¥ëœ ê°’ë“¤ì„ ì¶œë ¥ (ë””ë²„ê¹…ìš©)
                console.log('ì…ë ¥ëœ ê°’ë“¤:', { title, author, price, stock, category });
                
                // 2ë‹¨ê³„: ìœ íš¨ì„± ê²€ì‚¬ - ëª¨ë“  í•„ë“œê°€ ë¹„ì–´ìˆì§€ ì•Šì€ì§€ í™•ì¸
                if (title === '') {                          // ì œëª©ì´ ë¹„ì–´ìˆëŠ”ì§€ í™•ì¸
                    alert('ì±… ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');           // ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ
                    return;                                   // í•¨ìˆ˜ ì‹¤í–‰ ì¤‘ë‹¨ (ë” ì´ìƒ ì§„í–‰í•˜ì§€ ì•ŠìŒ)
                }
                
                if (author === '') {                         // ì €ìê°€ ë¹„ì–´ìˆëŠ”ì§€ í™•ì¸
                    alert('ì €ìëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                    return;                                   // í•¨ìˆ˜ ì‹¤í–‰ ì¤‘ë‹¨
                }
                
                if (price === '') {                          // ê°€ê²©ì´ ë¹„ì–´ìˆëŠ”ì§€ í™•ì¸
                    alert('ê°€ê²©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                    return;                                   // í•¨ìˆ˜ ì‹¤í–‰ ì¤‘ë‹¨
                }
                
                if (stock === '') {                          // ì¬ê³ ê°€ ë¹„ì–´ìˆëŠ”ì§€ í™•ì¸
                    alert('ì¬ê³  ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                    return;                                   // í•¨ìˆ˜ ì‹¤í–‰ ì¤‘ë‹¨
                }
                
                if (category === '') {                       // ì¹´í…Œê³ ë¦¬ê°€ ì„ íƒë˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸
                    alert('ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
                    return;                                   // í•¨ìˆ˜ ì‹¤í–‰ ì¤‘ë‹¨
                }
                
                // ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ëª¨ë‘ í†µê³¼í–ˆë‹¤ëŠ” ë©”ì‹œì§€ ì¶œë ¥ (ë””ë²„ê¹…ìš©)
                console.log('ìœ íš¨ì„± ê²€ì‚¬ í†µê³¼!');
                
                // 3ë‹¨ê³„: ìƒˆë¡œìš´ ì±… ê°ì²´ ìƒì„± - ì…ë ¥ë°›ì€ ë°ì´í„°ë¡œ ì±… ê°ì²´ ë§Œë“¤ê¸°
                const newBook = {
                    title: title,                            // ì±… ì œëª© (ë¬¸ìì—´ ê·¸ëŒ€ë¡œ)
                    author: author,                          // ì €ìëª… (ë¬¸ìì—´ ê·¸ëŒ€ë¡œ)
                    price: parseInt(price),                  // ê°€ê²©ì„ ë¬¸ìì—´ì—ì„œ ì •ìˆ˜ë¡œ ë³€í™˜ (ì˜ˆ: "15000" â†’ 15000)
                    stock: parseInt(stock),                  // ì¬ê³ ë¥¼ ë¬¸ìì—´ì—ì„œ ì •ìˆ˜ë¡œ ë³€í™˜ (ì˜ˆ: "5" â†’ 5)
                    category: category                       // ì¹´í…Œê³ ë¦¬ (ë¬¸ìì—´ ê·¸ëŒ€ë¡œ)
                };
                
                // ìƒˆë¡œ ìƒì„±ëœ ì±… ê°ì²´ë¥¼ ì½˜ì†”ì— ì¶œë ¥ (ë””ë²„ê¹…ìš©)
                console.log('ìƒˆë¡œ ìƒì„±ëœ ì±… ê°ì²´:', newBook);
                
                // 4ë‹¨ê³„: ì „ì—­ books ë°°ì—´ì— ìƒˆ ì±… ì¶”ê°€
                books.push(newBook);                         // .push()ëŠ” ë°°ì—´ì˜ ë§¨ ëì— ìƒˆë¡œìš´ ìš”ì†Œë¥¼ ì¶”ê°€í•˜ëŠ” ë©”ì„œë“œ
                console.log('ì±…ì´ ë°°ì—´ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. í˜„ì¬ ì´ ì±… ìˆ˜:', books.length);
                
                // 5ë‹¨ê³„: ì…ë ¥ í•„ë“œë“¤ì„ ëª¨ë‘ ë¹„ìš°ê¸° (ë‹¤ìŒ ì…ë ¥ì„ ìœ„í•´ ì´ˆê¸°í™”)
                document.getElementById('newBookTitle').textContent = '';      // ì œëª© í•„ë“œ ë¹„ìš°ê¸°
                document.getElementById('newBookAuthor').textContent = '';     // ì €ì í•„ë“œ ë¹„ìš°ê¸°
                document.getElementById('newBookPrice').textContent = '';      // ê°€ê²© í•„ë“œ ë¹„ìš°ê¸°
                document.getElementById('newBookStock').textContent = '';      // ì¬ê³  í•„ë“œ ë¹„ìš°ê¸°
                document.getElementById('newBookCategory').value = '';         // ì¹´í…Œê³ ë¦¬ ì„ íƒ ì´ˆê¸°í™”
                
                // 6ë‹¨ê³„: í™”ë©´ì— í‘œì‹œë˜ëŠ” ì±… ëª©ë¡ì„ ì—…ë°ì´íŠ¸ (ìƒˆë¡œ ì¶”ê°€ëœ ì±… í¬í•¨)
                displayBooks(books);                         // ì „ì²´ books ë°°ì—´ì„ ë‹¤ì‹œ í™”ë©´ì— í‘œì‹œ
                
                // 7ë‹¨ê³„: ì‚¬ìš©ìì—ê²Œ ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
                alert('ì±…ì´ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }

            // ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ì—°ê²°
            document.getElementById('addBookBtn').addEventListener('click', addNewBook);

            // ì…ë ¥ ì œí•œ ê¸°ëŠ¥ ì¶”ê°€
            // ê°€ê²© ì…ë ¥ ì œí•œ (ìˆ«ìë§Œ)
            document.getElementById('newBookPrice').addEventListener('input', function() {
                let text = this.textContent;
                // ìˆ«ìê°€ ì•„ë‹Œ ë¬¸ì ì œê±°
                let numbersOnly = text.replace(/[^0-9]/g, ''); // .replace()ëŠ” ë¬¸ìì—´ì—ì„œ íŠ¹ì • ë¬¸ìë¥¼ ë‹¤ë¥¸ ë¬¸ìë¡œ ë°”ê¾¸ëŠ” ë©”ì„œë“œ
                if (text !== numbersOnly) {                    // ë§Œì•½ ì…ë ¥ëœ í…ìŠ¤íŠ¸ê°€ ìˆ«ìë§Œìœ¼ë¡œ ì´ë£¨ì–´ì§€ì§€ ì•Šì•˜ë‹¤ë©´
                    this.textContent = numbersOnly;            // ìˆ«ìë§Œìœ¼ë¡œ ì´ë£¨ì–´ì§„ í…ìŠ¤íŠ¸ë¡œ ë³€ê²½
                    // ì»¤ì„œë¥¼ ëìœ¼ë¡œ ì´ë™
                    let range = document.createRange();        // .createRange()ëŠ” ìƒˆë¡œìš´ Range ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë©”ì„œë“œ
                    range.selectNodeContents(this);            // .selectNodeContents()ëŠ” Range ê°ì²´ì— íŠ¹ì • ë…¸ë“œì˜ ë‚´ìš©ì„ ì„ íƒí•˜ë„ë¡ ì„¤ì •
                    range.collapse(false);                     // .collapse()ëŠ” Range ê°ì²´ì˜ ì‹œì‘ê³¼ ëì„ ë™ì¼í•˜ê²Œ ì„¤ì •í•˜ì—¬ ì»¤ì„œë¥¼ ëìœ¼ë¡œ ì´ë™
                    let sel = window.getSelection();           // .getSelection()ì€ í˜„ì¬ ì„ íƒëœ í…ìŠ¤íŠ¸ ë²”ìœ„ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë©”ì„œë“œ
                    range.selectNodeContents(this);            // ì„ íƒëœ ë…¸ë“œì˜ ë‚´ìš©ì„ Range ê°ì²´ì— ì„¤ì •
                    range.collapse(false);                     // ì»¤ì„œë¥¼ ëìœ¼ë¡œ ì´ë™
                    sel.removeAllRanges();                     // .removeAllRanges()ëŠ” í˜„ì¬ ì„ íƒëœ ëª¨ë“  ë²”ìœ„ë¥¼ ì œê±°
                    sel.addRange(range);                       // .addRange()ëŠ” Range ê°ì²´ë¥¼ í˜„ì¬ ì„ íƒëœ ë²”ìœ„ì— ì¶”ê°€
                }
            });

            // ì¬ê³  ì…ë ¥ ì œí•œ (ìˆ«ìë§Œ)
            document.getElementById('newBookStock').addEventListener('input', function() {
                let text = this.textContent;
                // ìˆ«ìê°€ ì•„ë‹Œ ë¬¸ì ì œê±°
                let numbersOnly = text.replace(/[^0-9]/g, '');
                if (text !== numbersOnly) {
                    this.textContent = numbersOnly;
                    // ì»¤ì„œë¥¼ ëìœ¼ë¡œ ì´ë™
                    let range = document.createRange();
                    let sel = window.getSelection();
                    range.selectNodeContents(this);
                    range.collapse(false);
                    sel.removeAllRanges();
                    sel.addRange(range);
                }
            });

            // ì œëª©ê³¼ ì €ìëŠ” íŠ¹ìˆ˜ë¬¸ì ì¼ë¶€ ì œí•œ (ê¸°ë³¸ì ì¸ ë¬¸ìë§Œ í—ˆìš©)
            document.getElementById('newBookTitle').addEventListener('input', function(e) {
                // í•œê¸€ ì…ë ¥ ì¤‘ì¼ ë•ŒëŠ” ì²˜ë¦¬í•˜ì§€ ì•ŠìŒ (IME ë¬¸ì œ í•´ê²°)
                if (e.isComposing || e.inputType === 'insertCompositionText') {
                    return;
                }
                
                let text = this.textContent;
                // í•œê¸€, ì˜ë¬¸, ìˆ«ì, ê³µë°±, ì¼ë¶€ íŠ¹ìˆ˜ë¬¸ìë§Œ í—ˆìš© (ê³µë°±ì„ ëª…í™•íˆ í¬í•¨)
                let validText = text.replace(/[^\u3131-\u3163\uac00-\ud7a3a-zA-Z0-9\s\-\(\)\.\,]/g, '');
                if (text !== validText) {
                    this.textContent = validText;
                    // ì»¤ì„œë¥¼ ëìœ¼ë¡œ ì´ë™
                    let range = document.createRange();
                    let sel = window.getSelection();
                    range.selectNodeContents(this);
                    range.collapse(false);
                    sel.removeAllRanges();
                    sel.addRange(range);
                }
            });

            document.getElementById('newBookAuthor').addEventListener('input', function(e) {
                // í•œê¸€ ì…ë ¥ ì¤‘ì¼ ë•ŒëŠ” ì²˜ë¦¬í•˜ì§€ ì•ŠìŒ (IME ë¬¸ì œ í•´ê²°)
                if (e.isComposing || e.inputType === 'insertCompositionText') {
                    return;
                }
                
                let text = this.textContent;
                // í•œê¸€, ì˜ë¬¸, ìˆ«ì, ê³µë°±, ì¼ë¶€ íŠ¹ìˆ˜ë¬¸ìë§Œ í—ˆìš© (ê³µë°±ì„ ëª…í™•íˆ í¬í•¨)
                let validText = text.replace(/[^\u3131-\u3163\uac00-\ud7a3a-zA-Z0-9\s\-\(\)\.\,]/g, '');
                if (text !== validText) {
                    this.textContent = validText;
                    // ì»¤ì„œë¥¼ ëìœ¼ë¡œ ì´ë™
                    let range = document.createRange();
                    let sel = window.getSelection();
                    range.selectNodeContents(this);
                    range.collapse(false);
                    sel.removeAllRanges();
                    sel.addRange(range);
                }
            });

            // ì´ˆê¸° ì±… ëª©ë¡ í‘œì‹œ
            displayBooks(books);


    </script>
</body>
</html>